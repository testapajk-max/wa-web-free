<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>SERVICE BY iEelXyz</title>

<style>
    body {
        background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQDqZUmIYDd3_Bhn-fA_Dl9FjST3b1in5WILTdWQKck3va5cBUHbeAwHjY8&s=10');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        transition: 0.3s;
    }

    .dark { filter: brightness(0.7) contrast(1.15); }

    button {
        padding: 10px 25px;
        margin: 10px;
        background-color: #d4d6d5;
        color: black;
        border-radius: 4px;
        border: 1px solid #fdef0c;
        cursor: pointer;
    }

    .hidden { display: none; }

    input, textarea {
        width: 85%;
        padding: 10px;
        margin: 10px;
        border-radius: 5px;
        border: none;
    }

    .blink {
        font-size: 20px;
        animation: blink 3s infinite;
    }

    @keyframes blink {
        0%, 100% { color: #fff; text-shadow: 0 0 20px #fff; }
        50% { color: #ddd; text-shadow: 0 0 10px #ccc; }
    }

    .vipSensor {
        position: relative;
        overflow: hidden;
        cursor: not-allowed !important;
        opacity: 1;
    }

    .loader {
        border: 5px solid #ddd;
        border-top: 5px solid yellow;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        animation: spin 1s linear infinite;
        margin: 15px auto;
        display: none;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .checkmark {
        font-size: 45px;
        color: lightgreen;
        display: none;
        margin-top: 15px;
    }

    #darkToggle {
        position: fixed;
        top: 15px;
        right: 15px;
        background: rgba(0,0,0,0.4);
        color: white;
        border: 1px solid yellow;
    }
</style>
</head>

<body>

<button id="darkToggle" onclick="toggleDark()">üåô Dark</button>

<div id="menuPage">
    <br><br><br>

    <em class="blink">üî• SERVICE WHATSAPP TERBAIK üî•</em>

    <br><br>
    <h3>üëæ BETA PROJECT üëæ</h3>

    <button onclick="openInput('KENON (BANNED)')"><h4>METHODS BANNED üëΩ</h4></button>
    <button onclick="openInput('UNKENON (UNBANNED)')"><h4>METHODS UNBANNED ü•∂</h4></button>
    <button onclick="openInput('RESET-OTP')"><h4>METHODS RESET OTP ‚ò†Ô∏è</h4></button>

    <br><br>
    <h3>‚ö†Ô∏è JANGAN DISALAH GUNAKAN ‚ö†Ô∏è</h3>
</div>

<div id="inputPage" class="hidden">

    <br><br>
    <h2 id="methodTitle">Method Selected : </h2>

    <input id="input1" placeholder="Masukkan No HP Target">

    <div id="methodSelectArea">

        <h3>Select Power Method : </h3>

        <button class="vipSensor" disabled>
            üî¥ BRUTAL KEDIP (üåü VIP)
        </button>

        <button onclick="selectStrength('Medium')" id="mediumBtn">
            üü° MEDIUM METHOD (üî• FREE)
        </button>

        <button onclick="selectStrength('Slow')" id="slowBtn">
            üü¢ SLOW METHOD (üî• FREE)
        </button>

        <p id="strengthStatus" style="margin-top:5px; text-shadow:0 0 5px black;"></p>
    </div>

    <textarea id="pesan" placeholder="Pesan tambahan buat owner (opsional)"></textarea>

    <button id="kirimBtn">AUTO SEND</button>
    <button onclick="backToMenu()">BACK</button>

    <p id="status" style="margin-top:20px; font-size:17px; font-weight:bold;"></p>

    <div class="loader" id="loadingSpinner"></div>

    <div id="checkIcon" class="checkmark">‚úî</div>

</div>

<script>
    let currentMethod = "";
    let strength = "";
    let cooldown = false;
    let cooldownLeft = 0;

    function openInput(method) {
        currentMethod = method;
        document.getElementById("methodTitle").innerText = "METHOD : " + method;

        document.getElementById("menuPage").classList.add("hidden");
        document.getElementById("inputPage").classList.remove("hidden");

        strength = "";
        document.getElementById("strengthStatus").innerText = "";

        document.getElementById("checkIcon").style.display = "none";
        document.getElementById("loadingSpinner").style.display = "none";

        if (method === "RESET-OTP" || method === "resetotp") {
            document.getElementById("methodSelectArea").classList.add("hidden");
        } else {
            document.getElementById("methodSelectArea").classList.remove("hidden");
        }
    }

    function selectStrength(type) {
        strength = type;
        document.getElementById("strengthStatus").innerText = "Selected : " + type;
    }

    function backToMenu() {
        document.getElementById("inputPage").classList.add("hidden");
        document.getElementById("menuPage").classList.remove("hidden");

        document.getElementById("status").innerText = "";
        document.getElementById("input1").value = "";
        document.getElementById("pesan").value = "";
        cooldown = false;
        cooldownLeft = 0;
    }

    // ================================================
    //  FUNGSI KIRIM ‚Äî tanpa cooldown otomatis
    // ================================================
    async function kirim() {
        const i1 = document.getElementById("input1").value.trim();
        const pesan = document.getElementById("pesan").value.trim();
        const status = document.getElementById("status");
        const loader = document.getElementById("loadingSpinner");
        const checkIcon = document.getElementById("checkIcon");
        const btn = document.getElementById("kirimBtn");

        if (!i1) {
            status.style.color = "yellow";
            status.innerText = "‚ùó Data No HP Target Wajib Diisi!";
            return;
        }

        if (currentMethod !== "RESET-OTP" && currentMethod !== "resetotp" && !strength) {
            status.style.color = "yellow";
            status.innerText = "‚ùó Pilih method ( Medium / Slow )!";
            return;
        }

        if (cooldown) {
            status.style.color = "yellow";
            status.innerText = `‚è≥ Cooldown ${cooldownLeft} detik...`;
            return;
        }

        loader.style.display = "block";
        checkIcon.style.display = "none";
        btn.disabled = true;

        status.style.color = "white";
        status.innerText = "üîß Mempersiapkan Method...";
        await new Promise(r => setTimeout(r, 2000));

        status.innerText = "‚öôÔ∏è Mengcompile Hasil...";
        await new Promise(r => setTimeout(r, 2000));

        status.innerText = "üì° Mengirim...";
        await new Promise(r => setTimeout(r, 2000));

        const data = {
            method: currentMethod,
            input1: i1,
            input2: strength || "-",
            pesan: pesan
        };

        const res = await fetch("/api/send", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        const out = await res.json();

        loader.style.display = "none";

        if (out.success) {
            checkIcon.style.display = "block";
            status.style.color = "lightgreen";
            status.innerText = "‚úî Terkirim!";
            btn.disabled = false;
        } else {
            checkIcon.style.display = "none";
            status.style.color = "red";
            status.innerText = "‚ùå Gagal mengirim!";
            btn.disabled = false;
        }
    }

    // tombol kirim mendengarkan DOUBLE USE ‚Üí cooldown baru aktif
    document.getElementById("kirimBtn").addEventListener("click", () => {
        if (checkIcon.style.display === "block" && !cooldown) {
            cooldown = true;
            cooldownLeft = 5;

            const status = document.getElementById("status");
            status.style.color = "yellow";
            status.innerText = `‚è≥ Cooldown ${cooldownLeft} detik...`;

            let interval = setInterval(() => {
                cooldownLeft--;
                status.innerText = `‚è≥ Cooldown ${cooldownLeft} detik...`;

                if (cooldownLeft <= 0) {
                    clearInterval(interval);
                    cooldown = false;
                    status.innerText = "";
                }
            }, 1000);
        }
    });

    function toggleDark() {
        document.body.classList.toggle("dark");
    }

    // =====================================================
    // BRUTAL KEDIP FREE TIMER (?setbk=)
    // =====================================================
    let brutalEndTime = 0;

    function setBrutalKedip(seconds) {
        brutalEndTime = Date.now() + (seconds * 1000);
        alert("BRUTAL KEDIP Free aktif selama " + seconds + " detik!");
    }

    setInterval(() => {
        const btn = document.querySelector(".vipSensor");
        if (!btn) return;

        const now = Date.now();

        if (now < brutalEndTime) {
            const sisa = Math.floor((brutalEndTime - now) / 1000);
            btn.innerHTML = `üî¥ BRUTAL KEDIP (üåü VIP) ‚Äî Free Time : ${sisa}s`;
            btn.disabled = false;
            btn.style.cursor = "pointer";
        } else {
            btn.innerHTML = "üî¥ BRUTAL KEDIP (üåü VIP)";
            btn.disabled = true;
            btn.style.cursor = "not-allowed";
        }
    }, 1000);

    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get("setbk")) {
        const dur = parseInt(urlParams.get("setbk"));
        if (!isNaN(dur)) setBrutalKedip(dur);
    }
</script>

</body>
</html>